<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to EXPROB_Assignment_02’s documentation! &mdash; EXPROB_Assignment_02 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> EXPROB_Assignment_02
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to EXPROB_Assignment_02’s documentation!</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#module-scripts.robot_states">Robot State Module</a></li>
<li><a class="reference internal" href="#module-scripts.state_machine">Finite State Machine Module</a></li>
<li><a class="reference internal" href="#my-moveit-module">My Moveit Module</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">EXPROB_Assignment_02</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Welcome to EXPROB_Assignment_02’s documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="welcome-to-exprob-assignment-02-s-documentation">
<h1>Welcome to EXPROB_Assignment_02’s documentation!<a class="headerlink" href="#welcome-to-exprob-assignment-02-s-documentation" title="Permalink to this headline"></a></h1>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h1>
<p>This package is an experiment to use a topological map ontology for controling a robot using ROS.
The ontology consists of an indoor environment with multiple rooms and a mobile robot.</p>
<a class="reference internal image-reference" href="_images/UML_Assignment_02.jpg"><img alt="topological_map" class="align-center" src="_images/UML_Assignment_02.jpg" style="width: 300px;" /></a>
<p>The robot starts in room E and by scanning the provided markers, it receives the information to build the
semantic map, i.e., the name and center position of each room and the connections between them.</p>
<p>Once the semantic map is built, robot has to start moving among the rooms with the policy that each
room that has not been visited for a long time, would be selected as the target room. Everytime the robot
gets to the target room, it has to scan the room environment as it did for the first time with the markers.</p>
<p>When the robot battery is low, it goes to the charger which is placed in room E,
sand wait for some times before to start again with the above behavior.</p>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<p>This is the documentation of the EXPROB_Assignment_02 package!</p>
</div>
<div class="section" id="module-scripts.robot_states">
<span id="robot-state-module"></span><h1>Robot State Module<a class="headerlink" href="#module-scripts.robot_states" title="Permalink to this headline"></a></h1>
<span class="target" id="module-robot_states"></span><p>This node implements an robot_states</p>
<dl class="simple">
<dt>Service:</dt><dd><p>‘robot-state’
‘state/get_pose’
‘state/get_battery_level’
‘state/set_battery_level’</p>
</dd>
</dl>
</div>
<div class="section" id="module-scripts.state_machine">
<span id="finite-state-machine-module"></span><h1>Finite State Machine Module<a class="headerlink" href="#module-scripts.state_machine" title="Permalink to this headline"></a></h1>
<span class="target" id="module-state_machine"></span><p>This node implements State Mmachine</p>
<p>This script handles the main behavior of a robot by using a finite state machine. It waits for the ontology (map) to be built, and then enters a loop that transitions between three states: move_in_corridor, visitroom, and charging.</p>
<p>In the move_in_corridor state, the robot moves randomly in the corridors and waits for a certain amount of time if the battery is not low and there are no urgent rooms to visit. If the battery is low, the robot transitions to the charging state, in which it stays in room E until the battery is charged. If there is an urgent room to visit while the battery is charged, the robot transitions to the visitroom state and stays there for a certain amount of time.</p>
<dl class="py class">
<dt class="sig sig-object py" id="scripts.state_machine.Battery_Low">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">Battery_Low</span></span><a class="reference internal" href="_modules/scripts/state_machine.html#Battery_Low"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Battery_Low" title="Permalink to this definition"></a></dt>
<dd><p>Defines the state when robot has reached the charger and chargers battery after some time using
<code class="docutils literal notranslate"><span class="pre">set_battery_level(battery_level)</span></code> function and then returns <code class="docutils literal notranslate"><span class="pre">charged</span></code> transition.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scripts.state_machine.Battery_Low.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#Battery_Low.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Battery_Low.execute" title="Permalink to this definition"></a></dt>
<dd><p>Implements the execution of the tasks while this state gets active.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.state_machine.Map_Receiving">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">Map_Receiving</span></span><a class="reference internal" href="_modules/scripts/state_machine.html#Map_Receiving"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Map_Receiving" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.state_machine.Map_Receiving.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#Map_Receiving.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Map_Receiving.execute" title="Permalink to this definition"></a></dt>
<dd><p>Implements the execution of the tasks while this state gets active.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.state_machine.Normal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">Normal</span></span><a class="reference internal" href="_modules/scripts/state_machine.html#Normal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Normal" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.state_machine.Normal.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#Normal.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Normal.execute" title="Permalink to this definition"></a></dt>
<dd><p>Implements the execution of the tasks while this state gets active.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scripts.state_machine.Urgent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">Urgent</span></span><a class="reference internal" href="_modules/scripts/state_machine.html#Urgent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Urgent" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scripts.state_machine.Urgent.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">userdata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#Urgent.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.Urgent.execute" title="Permalink to this definition"></a></dt>
<dd><p>Implements the execution of the tasks while this state gets active.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.cutBattery">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">cutBattery</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#cutBattery"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.cutBattery" title="Permalink to this definition"></a></dt>
<dd><p>Cutting the Battery Level Service</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.findindividual">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">findindividual</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#findindividual"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.findindividual" title="Permalink to this definition"></a></dt>
<dd><p>Function for finding the individual in a list from the return of a qureied proprity from armor.
:param Individual: The individual in the armor resonse format ex. <em>[‘&lt;http://bnc/exp-rob-lab/2022-23#R1&gt;’]</em>
:type Individual: list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The individual extarcted and changed to a string <em>ex. “R1”</em></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Individual(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.get_room_info">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">get_room_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">room_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#get_room_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.get_room_info" title="Permalink to this definition"></a></dt>
<dd><p>Server client for <code class="docutils literal notranslate"><span class="pre">marker_server</span></code>, gets information for each room using <code class="docutils literal notranslate"><span class="pre">room_info</span></code> service
:param room_id:
:type room_id: int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>resp(RoomInformationResponse)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.get_room_pose">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">get_room_pose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">room</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#get_room_pose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.get_room_pose" title="Permalink to this definition"></a></dt>
<dd><p>Detects the center postion by using the room information for corresponding room
:param room:
:type room: string</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>room_pose(Point)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.main">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.main" title="Permalink to this definition"></a></dt>
<dd><p>The main function for finite_state_machine node, initialises the node defines the subscriner to the <code class="docutils literal notranslate"><span class="pre">/image_id</span></code> topic
, defines the states and transitions of the finite state machine for topological map and finally
starts the finite state machine process</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.marker_id_callback">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">marker_id_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#marker_id_callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.marker_id_callback" title="Permalink to this definition"></a></dt>
<dd><p>Callback function for <code class="docutils literal notranslate"><span class="pre">/image_id</span></code> topic subscriber. Eveytime an image id is detected, checks
if image id is valuable and not already available, then saves the corresponding information of
each room in the global variables by calling <code class="docutils literal notranslate"><span class="pre">get_room_info(room_id)</span></code> function, and modifies
the ontology using <code class="docutils literal notranslate"><span class="pre">add_room(room)</span></code>, <code class="docutils literal notranslate"><span class="pre">add_door(door)</span></code>, <code class="docutils literal notranslate"><span class="pre">assign_doors_to_room(room,</span> <span class="pre">doors)</span></code>
<code class="docutils literal notranslate"><span class="pre">disjoint_individuals()</span></code> and <code class="docutils literal notranslate"><span class="pre">add_last_visit_time(room,</span> <span class="pre">visit_time)</span></code> functions from
<code class="docutils literal notranslate"><span class="pre">topological_map.py</span></code> helper script.
:param data:
:type data: int32</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.set_arm_movement_state">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">set_arm_movement_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arm_movement_state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#set_arm_movement_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.set_arm_movement_state" title="Permalink to this definition"></a></dt>
<dd><p>Detects the markers by sending requests after appropriate time
:param Boolean: True</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="scripts.state_machine.urgentupdate">
<span class="sig-prename descclassname"><span class="pre">scripts.state_machine.</span></span><span class="sig-name descname"><span class="pre">urgentupdate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scripts/state_machine.html#urgentupdate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scripts.state_machine.urgentupdate" title="Permalink to this definition"></a></dt>
<dd><p>Function for checking if there is an urgent room to set the global <em>urgentflag</em>, also returns the nearby urgent room.
:param void:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The nearby urgent room according to the robot position in the corridors.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Urgent room(string)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="my-moveit-module">
<h1>My Moveit Module<a class="headerlink" href="#my-moveit-module" title="Permalink to this headline"></a></h1>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Awais Tahir.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>